<!-- Questions Modal -->
<div class="fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6">

    <!-- Header -->
    <div class="flex items-center justify-between mb-4">
      <span class="text-sm text-main font-semibold">
      Question {{ (CurrentQuestion?.index ?? 0) + 1 }} of {{ numQ }}
      </span>
      <div class="flex items-center space-x-3">
        <span class="text-green-600 font-semibold flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 text-gray-600" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3" />
          </svg>
          <!-- {{ examTitle }} -->
        </span>
        <button type="button" (click)="CloseModal()"
          class="text-gray-400 hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm h-8 w-8 flex items-center justify-center">
          âœ•
        </button>
      </div>
    </div>

    <!-- Progress dots -->
    <div class="flex justify-center space-x-2 mb-6">
      @for (q of GenerateRange(); let i = $index; track i) {
      <div class="w-2 h-2 rounded-full" [ngClass]="{
          'bg-main': i + 1 <= (CurrentQuestion?.index ?? 0),  
          'bg-gray-300': i + 1 > (CurrentQuestion?.index ?? 0)    
        }">
      </div>
      }
    </div>

    <!-- Question -->
    <h2 class="text-lg font-medium mb-4">
      {{ CurrentQuestion?.question }}
    </h2>

    <!-- Answers -->
    <div class="space-y-3">
      @for (answer of CurrentQuestion?.answers; track $index) {
      <label class="flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer">
        <input (change)="OnSelectAns()" [(ngModel)]="SelectedAnswer" [id]="answer.key" [value]="answer.key" type="radio"
          class="mr-3" name="answer" />
        <span>{{answer.answer}}</span>
      </label>
      }
    </div>

    <!-- Footer buttons -->
    <div class="flex justify-between mt-6">
      <!-- Back -->
      <button class="px-16 py-1 rounded-3xl transition border"
        [ngClass]="isBckBtnDisabled 
          ? 'border-gray-500 text-gray-500' 
          : 'border-main text-main hover:bg-main hover:text-white'"
        [disabled]="isBckBtnDisabled"
        (click)="onBack()">
        Back
      </button>

      <!-- Next / Finish -->
      <button class="px-16 py-1 rounded-3xl transition border"
        [ngClass]="isNextBtnDisabled 
          ? 'border-gray-500 text-gray-500' 
          : 'border-main text-main hover:bg-main hover:text-white'"
        [disabled]="isNextBtnDisabled"
        (click)="onNext()">
        {{ CurrentQuestion?.index === numQ - 1 ? 'Submit' : 'Next' }}
      </button>
    </div>

  </div>
</div>
