<div class="max-w-4xl mx-auto p-4">
  @for (exam of Exams; track $index) {
  <!-- Exam Card -->
  <div class="flex items-center justify-between bg-white rounded-xl shadow-md p-4 sm:p-6">
    <!-- Left: Icon + Info -->
    <div class="flex items-center space-x-4">
      <img src="https://cdn-icons-png.flaticon.com/512/732/732212.png" alt="Icon"
        class="w-14 h-14 rounded-lg object-contain" />
      <div>
        <h3 class="text-lg font-semibold text-gray-800">{{ exam.title }}</h3>
        <p class="text-sm text-gray-500">{{ exam.numberOfQuestions }} Questions</p>
      </div>
    </div>

    <!-- Right: Duration + Button -->
    <div class="flex flex-col items-end space-y-2">
      <p class="text-sm text-gray-700">{{ exam.duration }} minutes</p>
      <button (click)="startExam(exam._id)"
        class="text-white inline-flex w-full justify-center bg-main hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
        Start
      </button>

    </div>
  </div>
  }

  <!-- Instructions Modal -->
  @if (showModal === 'instructions') {
  <div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
    <div class="relative p-4 w-full max-w-md bg-white rounded-lg shadow">

      <div class="flex items-center justify-between p-2">
        <h3 class="text-lg font-semibold text-gray-900">Instructions</h3>
        <button type="button" (click)="closeModal()"
          class="text-gray-400 hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm h-8 w-8 flex items-center justify-center">
          ✕
        </button>
      </div>

      <div class="p-4">
        <ul class="space-y-2 mb-4 list-disc list-inside text-gray-700">
          <li>Lorem ipsum dolor sit amet consectetur.</li>
          <li>Lorem ipsum dolor sit amet consectetur.</li>
          <li>Lorem ipsum dolor sit amet consectetur.</li>
          <li>Lorem ipsum dolor sit amet consectetur.</li>
        </ul>

        <button (click)="beginQuestions()"
        class="text-white inline-flex w-full justify-center bg-main hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
          Start
        </button>

      </div>
    </div>
  </div>
  }


<!-- Questions Modal -->
@if (showModal === 'questions') {
  <div class="fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6">

      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <span class="text-sm text-main font-semibold">
          Question {{ currentQuestionIndex + 1 }} of {{ questions.length }}
        </span>
        <div class="flex items-center space-x-3">
          <span class="text-green-600 font-semibold flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 text-gray-600" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3" />
            </svg>
            {{ formattedTimer }}
          </span>
          <button type="button" (click)="closeModal()"
            class="text-gray-400 hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm h-8 w-8 flex items-center justify-center">
            ✕
          </button>
        </div>
      </div>

      <div class="flex justify-center space-x-1 mb-6">
        @for (q of questions; let i = $index; track i) {
        <div class="w-2 h-2 rounded-full"
          [class]="{ 'bg-main': i === currentQuestionIndex, 'bg-gray-300': i !== currentQuestionIndex }">
        </div>
        }
      </div>

      <!-- Question -->
      <h2 class="text-lg font-medium mb-4">
        {{ questions[currentQuestionIndex]?.question }}
      </h2>

      <!-- Answers -->
      <div class="space-y-3">
        @for (answer of questions[currentQuestionIndex]?.answers; track answer.key) {
        <label class="flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer">
          <input type="radio" name="answer{{currentQuestionIndex}}" class="mr-3"
            (change)="selectedAnswers[currentQuestionIndex] = answer.key" />
          {{ answer.answer }}
        </label>
        }
      </div>

      <div class="flex justify-between mt-6">
        <button (click)="prevQuestion()" [disabled]="currentQuestionIndex === 0"
          class="px-6 py-2 rounded-md border border-main text-main hover:bg-blue-50 transition">
          Back
        </button>

        <button (click)="nextQuestion()" [disabled]="currentQuestionIndex === questions.length - 1"
          class="px-6 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition">
          Next
        </button>
      </div>

    </div>
  </div>
  }
</div>